---
page_title: "vboxweb_nat_port_forward Resource - terraform-provider-vboxweb"
subcategory: ""
description: |-
  Manages a NAT port forwarding rule on a VirtualBox VM network adapter.
  This resource creates a single NAT port forwarding rule on a VM's NAT-attached network adapter.
  It supports an optional "auto host port" mode that automatically selects an available host port
  from a configured range, avoiding conflicts with other VirtualBox NAT port forwarding rules.
  Important guarantees and limitations:
  When using auto_host_port, the selected port is guaranteed not to conflict with any other
  VirtualBox NAT port forwarding rule on the same VirtualBox instance at apply time.This does NOT guarantee the port is not used by other (non-VirtualBox) processes on the host.VirtualBox may not surface runtime bind failures if the port is already in use.Changes to any rule attribute (except auto_host_port settings) will trigger rule replacement.
---

# vboxweb_nat_port_forward (Resource)

Manages a NAT port forwarding rule on a VirtualBox VM network adapter.

This resource creates a single NAT port forwarding rule on a VM's NAT-attached network adapter.
It supports an optional "auto host port" mode that automatically selects an available host port
from a configured range, avoiding conflicts with other VirtualBox NAT port forwarding rules.

**Important guarantees and limitations:**
- When using auto_host_port, the selected port is guaranteed not to conflict with any other
  VirtualBox NAT port forwarding rule on the same VirtualBox instance at apply time.
- This does NOT guarantee the port is not used by other (non-VirtualBox) processes on the host.
- VirtualBox may not surface runtime bind failures if the port is already in use.
- Changes to any rule attribute (except auto_host_port settings) will trigger rule replacement.

## Example Usage

### Basic Port Forward

```terraform
resource "vboxweb_nat_port_forward" "ssh" {
  machine_id   = vboxweb_machine.example.id
  adapter_slot = 0
  name         = "ssh"
  protocol     = "tcp"
  host_port    = 2222
  guest_port   = 22
}
```

### Auto Host Port Selection

```terraform
resource "vboxweb_nat_port_forward" "ssh_auto" {
  machine_id   = vboxweb_machine.example.id
  adapter_slot = 0
  name         = "ssh"
  protocol     = "tcp"
  guest_port   = 22

  # Automatically select an available host port
  auto_host_port     = true
  auto_host_port_min = 20000
  auto_host_port_max = 30000
}

# Access the automatically selected port
output "ssh_port" {
  value = vboxweb_nat_port_forward.ssh_auto.effective_host_port
}
```

### Multiple Port Forwards

```terraform
resource "vboxweb_nat_port_forward" "ssh" {
  machine_id   = vboxweb_machine.web.id
  adapter_slot = 0
  name         = "ssh"
  protocol     = "tcp"
  host_port    = 2222
  guest_port   = 22
}

resource "vboxweb_nat_port_forward" "http" {
  machine_id   = vboxweb_machine.web.id
  adapter_slot = 0
  name         = "http"
  protocol     = "tcp"
  host_port    = 8080
  guest_port   = 80
}

resource "vboxweb_nat_port_forward" "https" {
  machine_id   = vboxweb_machine.web.id
  adapter_slot = 0
  name         = "https"
  protocol     = "tcp"
  host_port    = 8443
  guest_port   = 443
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `adapter_slot` (Number) Network adapter slot number (0-7, corresponding to nic1-nic8).
- `guest_port` (Number) Guest port number (1-65535).
- `machine_id` (String) VirtualBox machine ID (UUID) that owns the NAT adapter.
- `name` (String) Name of the NAT port forwarding rule. Must be unique within the adapter's NAT engine.
- `protocol` (String) Protocol for the port forwarding rule: 'tcp' or 'udp'.

### Optional

- `auto_host_ip_scope` (String) How to handle host IP when checking for port conflicts: 'any' (all bindings conflict) or 'exact' (only same host_ip conflicts). Default: 'any'.
- `auto_host_port` (Boolean) If true and host_port is not set (or is 0), automatically select an available host port.
- `auto_host_port_max` (Number) Maximum port for auto-selection range (inclusive). Default: 40000.
- `auto_host_port_min` (Number) Minimum port for auto-selection range (inclusive). Default: 20000.
- `guest_ip` (String) Guest IP address. Empty string is typically fine for most use cases.
- `host_ip` (String) Host IP address to bind to. Empty string or '0.0.0.0' means all interfaces.
- `host_port` (Number) Host port number. If omitted or 0 and auto_host_port is true, a port will be automatically selected.

### Read-Only

- `effective_host_port` (Number) The actual host port in use. This equals host_port when explicitly set, or the auto-selected port when using auto_host_port.
- `id` (String) Unique identifier for this resource (machine_id:adapter_slot:name).

## Import

NAT port forward rules can be imported using the format `machine_id:adapter_slot:name`.

```shell
terraform import vboxweb_nat_port_forward.example "machine_id:adapter_slot:name"
```

### Example

```shell
terraform import vboxweb_nat_port_forward.ssh "550e8400-e29b-41d4-a716-446655440000:0:ssh"
```
